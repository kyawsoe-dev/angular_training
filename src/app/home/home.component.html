<div class="container mt-1">
  <div class="row">
    <div class="col-auto">
      <h4>User Registration Form</h4>
    </div>
    <div class="text-end">
      <button
        class="btn btn-primary"
        type="submit"
        (click)="goSave()"
        *ngIf="!isEditing"
      >
        Save
      </button>
      <button
        class="btn btn-success"
        type="submit"
        (click)="editUser(obj)"
        *ngIf="isEditing"
      >
        Update
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div *ngIf="successMessage" class="success-message text-success">
        <h6 class="text-center">{{ successMessage }}</h6>
      </div>

      <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="obj.name"
          placeholder="Enter Name"
          (input)="clearErrorMessage('Name is required')"
        />
        <div
          *ngIf="errorMessage === 'Name is required' && !obj.name"
          class="error-message text-danger"
        >
          {{ errorMessage }}
        </div>
      </div>

      <div class="mb-3">
        <label for="phone" class="form-label">Phone</label>
        <input
          type="phone"
          class="form-control"
          [(ngModel)]="obj.phone"
          placeholder="Enter Phone"
          (input)="clearErrorMessage('Phone is required')"
        />
        <div
          *ngIf="errorMessage === 'Phone is required' && !obj.phone"
          class="error-message text-danger"
        >
          {{ errorMessage }}
        </div>
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="obj.address"
          placeholder="Enter Address"
          (input)="clearErrorMessage('Address is required')"
        />

        <div
          *ngIf="errorMessage === 'Address is required' && !obj.address"
          class="error-message text-danger"
        >
          {{ errorMessage }}
        </div>
      </div>
    </div>
  </div>
  <h4>{{ title }}</h4>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Actions</th>
        <!-- Added a new column for actions -->
      </tr>
    </thead>
    <tbody *ngIf="userList && userList.length > 0; else noRecords">
      <tr *ngFor="let user of userList">
        <td>{{ user.custom_id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.address }}</td>
        <td>
          <button
            type="button"
            class="btn btn-primary btn-sm m-1"
            (click)="getEditUser(user)"
          >
            <i class="bi bi-pencil-fill"></i>
          </button>
          <button
            type="button"
            class="btn btn-danger btn-sm"
            (click)="deleteUser(user.id)"
          >
            <i class="bi bi-trash-fill"></i>
          </button>
        </td>
      </tr>
    </tbody>
    <ng-template #noRecords>
      <h6 class="mt-5 text-danger">Record Not Found !!</h6>
    </ng-template>
  </table>
</div>
